(function() {
  module.exports = function(filepath, base = ".", verbose) {
    var id, mod, parent, results;
    if ((mod = require.cache[filepath]) != null) {
      delete require.cache[filepath];
      if (verbose) {
        console.log(`deleted cache for ${filepath}`);
      }
      results = [];
      while ((mod != null) && ((parent = mod.parent) != null) && (id = parent != null ? parent.id : void 0) !== base) {
        delete require.cache[id];
        if (verbose) {
          console.log(`deleted cache for ${id}`);
        }
        results.push(mod = parent);
      }
      return results;
    }
  };

}).call(this);
